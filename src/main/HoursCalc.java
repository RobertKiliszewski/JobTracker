package main;

//Imports
import java.awt.EventQueue;
import javax.swing.*;
import java.awt.event.*;
import java.sql.*;
import java.util.ArrayList;
import java.awt.Color;
//Imports

public class HoursCalc {
	//Variables
	private JFrame frame;
	private JTextField startField;
	private JTextField finishField;
	private JTextField durationField;
	private JTextField dayField;
	private JTextField amountPaid;
	private JTextField rateField;
	public int user_id;
	private JTextField monthField;
	private JTextField yearField;
	private int index = 0;
	//Variables
	
	/**
	 * Launch the application.
	 */
	public static void main(String[] args) {
		EventQueue.invokeLater(new Runnable() {
			public void run() {
				try {
					HoursCalc window = new HoursCalc();
					window.frame.setVisible(true);
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
		});
	}

	/**
	 * Create the application.
	 */
	public HoursCalc() {
		initialize();
	}

	/**
	 * Initialize the contents of the frame.
	 */
	private void initialize() {
		frame = new JFrame("Day Calculator");
		frame.getContentPane().setBackground(Color.DARK_GRAY);
		frame.setBounds(100, 100, 450, 300);
		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		frame.getContentPane().setLayout(null);
		frame.setLocationRelativeTo(null);
		
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Rate Field				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		JLabel lblHourlyRate = new JLabel("Hourly Rate:");
		lblHourlyRate.setForeground(Color.BLACK);
		lblHourlyRate.setBounds(66, 3, 89, 14);
		frame.getContentPane().add(lblHourlyRate);
		
		rateField = new JTextField();
		rateField.setBounds(165, 0, 86, 20);
		frame.getContentPane().add(rateField);
		rateField.setColumns(10);
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Rate Field				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Start Field				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		JLabel startShift = new JLabel("Start:");
		startShift.setForeground(Color.BLACK);
		startShift.setBounds(66, 69, 46, 14);
		frame.getContentPane().add(startShift);
		
		startField = new JTextField();
		startField.setBounds(165, 63, 86, 20);
		frame.getContentPane().add(startField);
		startField.setColumns(10);
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Start Field				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		
		
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Finish Field				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		JLabel finishShift = new JLabel("Finish:");
		finishShift.setForeground(Color.BLACK);
		finishShift.setBounds(66, 97, 46, 14);
		frame.getContentPane().add(finishShift);
		
		finishField = new JTextField();
		finishField.setBounds(165, 94, 86, 20);
		frame.getContentPane().add(finishField);
		finishField.setColumns(10);
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Finish Field				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		
		
		
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Duration of Break Field				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		JLabel lblDuration = new JLabel("Duration:");
		lblDuration.setForeground(Color.BLACK);
		lblDuration.setBounds(10, 154, 89, 14);
		frame.getContentPane().add(lblDuration);
		
		durationField = new JTextField();
		durationField.setBounds(70, 151, 86, 20);
		frame.getContentPane().add(durationField);
		durationField.setColumns(10);
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Duration of Break Field				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Date Field				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		JLabel lblDate = new JLabel("Date:");
		lblDate.setForeground(Color.BLACK);
		lblDate.setBounds(66, 37, 46, 14);
		frame.getContentPane().add(lblDate);

		dayField = new JTextField();
		dayField.setBounds(164, 31, 40, 20);
		frame.getContentPane().add(dayField);
		dayField.setColumns(10);
		
		monthField = new JTextField();
		monthField.setColumns(10);
		monthField.setBounds(230, 31, 40, 20);
		frame.getContentPane().add(monthField);
		
		yearField = new JTextField();
		yearField.setColumns(10);
		yearField.setBounds(300, 31, 40, 20);
		frame.getContentPane().add(yearField);
		
		JLabel label = new JLabel("/");
		label.setForeground(Color.BLACK);
		label.setBounds(214, 31, 31, 21);
		frame.getContentPane().add(label);
		
		JLabel label_1 = new JLabel("/");
		label_1.setForeground(Color.BLACK);
		label_1.setBounds(280, 31, 31, 21);
		frame.getContentPane().add(label_1);
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Date Field				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

		
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Amount Paid Field				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		JLabel lblAmountPaid = new JLabel("Amount Paid:");
		lblAmountPaid.setForeground(Color.BLACK);
		lblAmountPaid.setBounds(165, 154, 86, 14);
		frame.getContentPane().add(lblAmountPaid);
		
		amountPaid = new JTextField();
		amountPaid.setBounds(275, 151, 86, 20);
		frame.getContentPane().add(amountPaid);
		amountPaid.setColumns(10);
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Amount Paid Field				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Calculate BTN				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		JButton calcBtn = new JButton("Calculate");
		calcBtn.setBackground(Color.LIGHT_GRAY);
		calcBtn.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent arg0) {
				
				hourlyCalc();
				
			}
		});
		calcBtn.setBounds(230, 202, 194, 20);
		frame.getContentPane().add(calcBtn);
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Calculate BTN				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Back BTN				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		JButton button = new JButton("Back");
		button.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent arg0) {
				frame.dispose();
			}
		});
		button.setBackground(Color.LIGHT_GRAY);
		button.setBounds(230, 233, 194, 20);
		frame.getContentPane().add(button);
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Back BTN				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Show BTN				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		JButton showDaysBTN = new JButton("Show Day Earnings");
		showDaysBTN.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent arg0) {
				showDay();
			}
		});
		showDaysBTN.setBackground(Color.LIGHT_GRAY);
		showDaysBTN.setBounds(10, 202, 210, 52);
		frame.getContentPane().add(showDaysBTN);
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////			Show BTN				 ///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		
		

		
	}
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	///////////////////////////////////////////////This Calculates the users daily income///////////////////////////////////////////////////////////////////////////////////////////////////////////
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	public void hourlyCalc()
	{
		/*Parse User input into variables*/
		String day = dayField.getText();
		int accDay = Integer.parseInt(day);
		
		String month = monthField.getText();
		int accMonth = Integer.parseInt(month);
		
		String year = yearField.getText();
		int accYear = Integer.parseInt(year);
		
		String rate = rateField.getText();
		double totRate = Double.parseDouble(rate);
		
		String start = startField.getText();
		double totStart = Double.parseDouble(start);
		
		String finish = finishField.getText();
		double totFinish = Double.parseDouble(finish);
		
		String duration = durationField.getText();
		double totDuration = Double.parseDouble(duration);
		
		String bAmount = amountPaid.getText();
		double breakAmount = Double.parseDouble(bAmount);
		/*Parse User input into variables*/
		
		double total = (((totFinish - totDuration) - totStart) * totRate) + breakAmount;
		
		JOptionPane.showMessageDialog(null, "Total Earned on " + accDay + "/" + accMonth + "/" + accYear + " is: " + total);
		
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		///////////////////////////////////////////////Adds to the database///////////////////////////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		try{     	
			   /*									connection										*/ 
			   Class.forName("com.mysql.jdbc.Driver").newInstance();
			   Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/mydb?user=root&password=");
			   Statement st = con.createStatement();
			   /*									MySQL Statement 								*/
			   st.executeUpdate("insert into Hours(date_day, date_month, date_year, earned, user_ID) VALUES( '"+accDay+"', '"+accMonth+"', '"+accYear+"', '"+total+"','"+user_id+"')");
			   JOptionPane.showConfirmDialog(null, "Added To Your Days", "Days", JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE);
			   st.close();
			   con.close();
			   
		   }
		
		   catch(Exception e){
			   
		       e.printStackTrace();
		       
		   }//Catch  
		
	}//HourlyCalc
	
	public void setUserID(int id){
		this.user_id = id;
	}
	
	public void showDay(){
		try{     
			
		       Class.forName("com.mysql.jdbc.Driver");  // MySQL database connection
		       Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/mydb?" + "user=root&password="); 
		       /*											MySQL																*/
		       PreparedStatement pst = conn.prepareStatement("Select date_day, date_month ,date_year, earned from Hours where user_ID = '"+user_id+"'");
		       ResultSet rs = pst.executeQuery();    
		       
		       /*								Array To Get data from database and display it to the user						*/
		       ArrayList<String> days = new ArrayList<String>();
		       ArrayList<String> months = new ArrayList<String>();
		       ArrayList<String> years = new ArrayList<String>();
		       ArrayList<String> earnings = new ArrayList<String>();
		       
		       /*								While result set had results													*/
		       days.clear();
		       months.clear();
		       years.clear();
		       earnings.clear();
		       while(rs.next()){
		    	   
		    		   int day = rs.getInt("date_day");
		    		   int month = rs.getInt("date_month");
		    		   int year = rs.getInt("date_year");
		    		   int earned = rs.getInt("earned");
		    	  
		    		   days.add(String.valueOf(day));
		    		   months.add(String.valueOf(month));
		    		   years.add(String.valueOf(year));
		    		   earnings.add(String.valueOf(earned));
		
		       }//While
		       
		       
		       String output = "";
		       
		       for (String day : days) {
		    	   	
		    	   	output +=  day  +"/"+ months.get(index)+"/" + years.get(index) + " | "+ earnings.get(index) + "\n";
		    	  	index ++;
		    	}
		       
		      JOptionPane.showMessageDialog(null,"Date | Earnings\n" + output);
		                               
		   }
		   catch(Exception e){
			   
		       e.printStackTrace();
		    
		   }       
	}

	public void setVisible(boolean b) {
		this.frame.setVisible(b);
	}
}